<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Davis Rakhshan">
<title>MyLabJournal - Explaining Black-Box Models With LIME</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/icons/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MyLabJournal</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-journal" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Journal</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-journal">
<li>
    <a class="dropdown-item" href="../../content/01_journal/01_ml_fundamentals.html" rel="" target="">
 <span class="dropdown-text">01 Machine Learning Fundamentals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/02_supervised_ML.html" rel="" target="">
 <span class="dropdown-text">02 Supervised ML - Regression (I) &amp; (II)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/04_automated_ML_with_H2o_1.html" rel="" target="">
 <span class="dropdown-text">03 Automated Machine Learning with H20 (I)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/05_automated_ML_with_H2o_2.html" rel="" target="">
 <span class="dropdown-text">04 Automated Machine Learning with H20 (II)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/06_performance_measures.html" rel="" target="">
 <span class="dropdown-text">05 Performance Measures</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/07_explain_black_box_with_lime.html" rel="" target="">
 <span class="dropdown-text">06 Explaining Black-Box Models With LIME</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../content/02_notes/05_class_notes.html" rel="" target="">
 <span class="menu-text">Class notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/03_other/06_links.html" rel="" target="">
 <span class="menu-text">Links</span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Explaining Black-Box Models With LIME</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Davis Rakhshan </p>
          </div>
  </div>
    
  
    
  </div>
  

</header><div class="cell" data-hash="07_explain_black_box_with_lime_cache/html/unnamed-chunk-1_027ad27046eb11d8d09b50b7ea2ee6c3">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># LIME FEATURE EXPLANATION ----</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># 1. Setup ----</span></span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># Load Libraries </span></span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(h2o)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(recipes)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">library</span>(tidyquant)</span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="fu">library</span>(lime)</span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="fu">library</span>(rsample)</span>
<span id="cb1-15"><a href="#cb1-15"></a></span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co"># Load Data</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>employee_attrition_tbl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../../scripts/data/datasets-1067-1925-WA_Fn-UseC_-HR-Employee-Attrition.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 1470 Columns: 35
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: ","
#&gt; chr  (9): Attrition, BusinessTravel, Department, EducationField, Gender, Job...
#&gt; dbl (26): Age, DailyRate, DistanceFromHome, Education, EmployeeCount, Employ...
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>definitions_raw_tbl    <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"../../scripts/data/data_definitions.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; New names:
#&gt; • `` -&gt; `...1`
#&gt; • `` -&gt; `...2`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Processing Pipeline</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">source</span>(<span class="st">"../../scripts/data/data_processing_pipeline.R"</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a>employee_attrition_readable_tbl <span class="ot">&lt;-</span> <span class="fu">process_hr_data_readable</span>(employee_attrition_tbl, definitions_raw_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Joining with `by = join_by(Education)`
#&gt; Joining with `by = join_by(EnvironmentSatisfaction)`
#&gt; Joining with `by = join_by(JobInvolvement)`
#&gt; Joining with `by = join_by(JobSatisfaction)`
#&gt; Joining with `by = join_by(PerformanceRating)`
#&gt; Joining with `by = join_by(RelationshipSatisfaction)`
#&gt; Joining with `by = join_by(WorkLifeBalance)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Split into test and train</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">set.seed</span>(<span class="at">seed =</span> <span class="dv">1113</span>)</span>
<span id="cb7-3"><a href="#cb7-3"></a>split_obj <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">initial_split</span>(employee_attrition_readable_tbl, <span class="at">prop =</span> <span class="fl">0.85</span>)</span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co"># Assign training and test data</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>train_readable_tbl <span class="ot">&lt;-</span> <span class="fu">training</span>(split_obj)</span>
<span id="cb7-7"><a href="#cb7-7"></a>test_readable_tbl  <span class="ot">&lt;-</span> <span class="fu">testing</span>(split_obj)</span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a>recipe_obj <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Attrition <span class="sc">~</span> ., <span class="at">data =</span> train_readable_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="#cb7-10"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb7-11"><a href="#cb7-11"></a>  <span class="fu">step_mutate_at</span>(<span class="fu">c</span>(<span class="st">"JobLevel"</span>, <span class="st">"StockOptionLevel"</span>), <span class="at">fn =</span> as.factor) <span class="sc">%&gt;%</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>  <span class="fu">prep</span>()</span>
<span id="cb7-13"><a href="#cb7-13"></a></span>
<span id="cb7-14"><a href="#cb7-14"></a>recipe_obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; 
#&gt; ── Recipe ──────────────────────────────────────────────────────────────────────
#&gt; 
#&gt; ── Inputs 
#&gt; Number of variables by role
#&gt; outcome:    1
#&gt; predictor: 34
#&gt; 
#&gt; ── Training information 
#&gt; Training data contained 1249 data points and no incomplete rows.
#&gt; 
#&gt; ── Operations 
#&gt; • Zero variance filter removed: EmployeeCount and Over18, ... | Trained
#&gt; • Variable mutation for: JobLevel and StockOptionLevel | Trained</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>train_tbl <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> train_readable_tbl)</span>
<span id="cb9-2"><a href="#cb9-2"></a>test_tbl  <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> test_readable_tbl)</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co"># 2. Models ----</span></span>
<span id="cb9-8"><a href="#cb9-8"></a></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="fu">h2o.init</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
#&gt; H2O is not running yet, starting it now...
#&gt; 
#&gt; Note:  In case of errors look at the following log files:
#&gt;     C:\Users\Davis-PC\AppData\Local\Temp\RtmpkznvLD\file6d941bb758a1/h2o_Davis_started_from_r.out
#&gt;     C:\Users\Davis-PC\AppData\Local\Temp\RtmpkznvLD\file6d9477d16aa4/h2o_Davis_started_from_r.err
#&gt; 
#&gt; 
#&gt; Starting H2O JVM and connecting:  Connection successful!
#&gt; 
#&gt; R is connected to the H2O cluster: 
#&gt;     H2O cluster uptime:         2 seconds 855 milliseconds 
#&gt;     H2O cluster timezone:       Europe/Berlin 
#&gt;     H2O data parsing timezone:  UTC 
#&gt;     H2O cluster version:        3.44.0.3 
#&gt;     H2O cluster version age:    6 months and 5 days 
#&gt;     H2O cluster name:           H2O_started_from_R_Davis_drs368 
#&gt;     H2O cluster total nodes:    1 
#&gt;     H2O cluster total memory:   7.98 GB 
#&gt;     H2O cluster total cores:    20 
#&gt;     H2O cluster allowed cores:  20 
#&gt;     H2O cluster healthy:        TRUE 
#&gt;     H2O Connection ip:          localhost 
#&gt;     H2O Connection port:        54321 
#&gt;     H2O Connection proxy:       NA 
#&gt;     H2O Internal Security:      FALSE 
#&gt;     R Version:                  R version 4.3.3 (2024-02-29 ucrt)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning in h2o.clusterInfo(): 
#&gt; Your H2O cluster version is (6 months and 5 days) old. There may be a newer version available.
#&gt; Please download and install the latest version from: https://h2o-release.s3.amazonaws.com/h2o/latest_stable.html</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>automl_leader <span class="ot">&lt;-</span> <span class="fu">h2o.loadModel</span>(<span class="st">"../../scripts/data/h2o_models/DeepLearning_grid_1_AutoML_1_20240622_153440_model_1"</span>)</span>
<span id="cb12-2"><a href="#cb12-2"></a>automl_leader</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Model Details:
#&gt; ==============
#&gt; 
#&gt; H2OBinomialModel: deeplearning
#&gt; Model ID:  DeepLearning_grid_1_AutoML_1_20240622_153440_model_1 
#&gt; Status of Neuron Layers: predicting Attrition, 2-class classification, bernoulli distribution, CrossEntropy loss, 1.962 weights/biases, 33,3 KB, 9.310 training samples, mini-batch size 1
#&gt;   layer units             type dropout       l1       l2 mean_rate rate_rms
#&gt; 1     1    95            Input 10.00 %       NA       NA        NA       NA
#&gt; 2     2    20 RectifierDropout  0.00 % 0.000000 0.000000  0.173053 0.386098
#&gt; 3     3     2          Softmax      NA 0.000000 0.000000  0.003560 0.006065
#&gt;   momentum mean_weight weight_rms mean_bias bias_rms
#&gt; 1       NA          NA         NA        NA       NA
#&gt; 2 0.000000    0.000639   0.126888  0.503054 0.052989
#&gt; 3 0.000000   -0.032795   1.057629 -0.007708 0.000102
#&gt; 
#&gt; 
#&gt; H2OBinomialMetrics: deeplearning
#&gt; ** Reported on training data. **
#&gt; ** Metrics reported on full training frame **
#&gt; 
#&gt; MSE:  0.07087868
#&gt; RMSE:  0.2662305
#&gt; LogLoss:  0.2694876
#&gt; Mean Per-Class Error:  0.1745662
#&gt; AUC:  0.9065758
#&gt; AUCPR:  0.7661669
#&gt; Gini:  0.8131516
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error      Rate
#&gt; No     879  30 0.033003   =30/909
#&gt; Yes     49 106 0.316129   =49/155
#&gt; Totals 928 136 0.074248  =79/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.186026   0.728522 131
#&gt; 2                       max f2  0.090162   0.729927 187
#&gt; 3                 max f0point5  0.255262   0.770465 113
#&gt; 4                 max accuracy  0.186026   0.925752 131
#&gt; 5                max precision  0.997067   1.000000   0
#&gt; 6                   max recall  0.000314   1.000000 394
#&gt; 7              max specificity  0.997067   1.000000   0
#&gt; 8             max absolute_mcc  0.186026   0.687697 131
#&gt; 9   max min_per_class_accuracy  0.052992   0.825806 235
#&gt; 10 max mean_per_class_accuracy  0.090162   0.841992 187
#&gt; 11                     max tns  0.997067 909.000000   0
#&gt; 12                     max fns  0.997067 154.000000   0
#&gt; 13                     max fps  0.000017 909.000000 399
#&gt; 14                     max tps  0.000314 155.000000 394
#&gt; 15                     max tnr  0.997067   1.000000   0
#&gt; 16                     max fnr  0.997067   0.993548   0
#&gt; 17                     max fpr  0.000017   1.000000 399
#&gt; 18                     max tpr  0.000314   1.000000 394
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: deeplearning
#&gt; ** Reported on validation data. **
#&gt; ** Metrics reported on full validation frame **
#&gt; 
#&gt; MSE:  0.1307555
#&gt; RMSE:  0.3616014
#&gt; LogLoss:  0.5095701
#&gt; Mean Per-Class Error:  0.2560866
#&gt; AUC:  0.8272467
#&gt; AUCPR:  0.6287858
#&gt; Gini:  0.6544934
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error     Rate
#&gt; No     122  25 0.170068  =25/147
#&gt; Yes     13  25 0.342105   =13/38
#&gt; Totals 135  50 0.205405  =38/185
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.070984   0.568182  49
#&gt; 2                       max f2  0.011837   0.681818  89
#&gt; 3                 max f0point5  0.354880   0.660377  16
#&gt; 4                 max accuracy  0.354880   0.854054  16
#&gt; 5                max precision  0.997236   1.000000   0
#&gt; 6                   max recall  0.000458   1.000000 147
#&gt; 7              max specificity  0.997236   1.000000   0
#&gt; 8             max absolute_mcc  0.328621   0.489111  18
#&gt; 9   max min_per_class_accuracy  0.030573   0.736842  65
#&gt; 10 max mean_per_class_accuracy  0.018816   0.751432  76
#&gt; 11                     max tns  0.997236 147.000000   0
#&gt; 12                     max fns  0.997236  37.000000   0
#&gt; 13                     max fps  0.000001 147.000000 184
#&gt; 14                     max tps  0.000458  38.000000 147
#&gt; 15                     max tnr  0.997236   1.000000   0
#&gt; 16                     max fnr  0.997236   0.973684   0
#&gt; 17                     max fpr  0.000001   1.000000 184
#&gt; 18                     max tpr  0.000458   1.000000 147
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: deeplearning
#&gt; ** Reported on cross-validation data. **
#&gt; ** 5-fold cross-validation on training data (Metrics computed for combined holdout predictions) **
#&gt; 
#&gt; MSE:  0.1434779
#&gt; RMSE:  0.3787848
#&gt; LogLoss:  1.717677
#&gt; Mean Per-Class Error:  0.3311012
#&gt; AUC:  0.7357394
#&gt; AUCPR:  0.3992677
#&gt; Gini:  0.4714788
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error       Rate
#&gt; No     829  80 0.088009    =80/909
#&gt; Yes     89  66 0.574194    =89/155
#&gt; Totals 918 146 0.158835  =169/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.071589   0.438538 138
#&gt; 2                       max f2  0.000002   0.528169 355
#&gt; 3                 max f0point5  0.995865   0.459610  43
#&gt; 4                 max accuracy  0.995865   0.868421  43
#&gt; 5                max precision  1.000000   0.857143   0
#&gt; 6                   max recall  0.000000   1.000000 399
#&gt; 7              max specificity  1.000000   0.998900   0
#&gt; 8             max absolute_mcc  0.071589   0.346343 138
#&gt; 9   max min_per_class_accuracy  0.000002   0.677419 355
#&gt; 10 max mean_per_class_accuracy  0.000029   0.692040 295
#&gt; 11                     max tns  1.000000 908.000000   0
#&gt; 12                     max fns  1.000000 149.000000   0
#&gt; 13                     max fps  0.000000 909.000000 399
#&gt; 14                     max tps  0.000000 155.000000 399
#&gt; 15                     max tnr  1.000000   0.998900   0
#&gt; 16                     max fnr  1.000000   0.961290   0
#&gt; 17                     max fpr  0.000000   1.000000 399
#&gt; 18                     max tpr  0.000000   1.000000 399
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; Cross-Validation Metrics Summary: 
#&gt;                              mean       sd cv_1_valid cv_2_valid cv_3_valid
#&gt; accuracy                 0.861852 0.018274   0.845070   0.845070   0.887324
#&gt; auc                      0.803406 0.048768   0.730885   0.852613   0.836674
#&gt; err                      0.138148 0.018274   0.154930   0.154930   0.112676
#&gt; err_count               29.400000 3.911521  33.000000  33.000000  24.000000
#&gt; f0point5                 0.530462 0.076929   0.445860   0.530303   0.655738
#&gt; f1                       0.523352 0.045683   0.459016   0.560000   0.571429
#&gt; f2                       0.521239 0.047936   0.472973   0.593220   0.506329
#&gt; lift_top_group           5.906300 0.815216   4.896552   6.264706   6.264706
#&gt; logloss                  0.476307 0.111504   0.422271   0.417649   0.458768
#&gt; max_per_class_error      0.477916 0.063070   0.517241   0.382353   0.529412
#&gt; mcc                      0.447547 0.058397   0.369469   0.469989   0.526002
#&gt; mean_per_class_accuracy  0.720934 0.024558   0.692466   0.752958   0.718534
#&gt; mean_per_class_error     0.279066 0.024558   0.307534   0.247042   0.281466
#&gt; mse                      0.105194 0.001969   0.105181   0.104028   0.102781
#&gt; pr_auc                   0.516358 0.095565   0.402161   0.609393   0.601468
#&gt; precision                0.538842 0.110070   0.437500   0.512195   0.727273
#&gt; r2                       0.148383 0.080100   0.105701   0.224509   0.233806
#&gt; recall                   0.522084 0.063070   0.482759   0.617647   0.470588
#&gt; rmse                     0.324325 0.003033   0.324317   0.322533   0.320594
#&gt; specificity              0.919784 0.029561   0.902174   0.888268   0.966480
#&gt;                         cv_4_valid cv_5_valid
#&gt; accuracy                  0.859155   0.872641
#&gt; auc                       0.780042   0.816817
#&gt; err                       0.140845   0.127359
#&gt; err_count                30.000000  27.000000
#&gt; f0point5                  0.510204   0.510204
#&gt; f1                        0.500000   0.526316
#&gt; f2                        0.490196   0.543478
#&gt; lift_top_group            6.870968   5.234568
#&gt; logloss                   0.672923   0.409926
#&gt; max_per_class_error       0.516129   0.444444
#&gt; mcc                       0.418454   0.453821
#&gt; mean_per_class_accuracy   0.703474   0.737237
#&gt; mean_per_class_error      0.296526   0.262763
#&gt; mse                       0.107958   0.106023
#&gt; pr_auc                    0.537043   0.431724
#&gt; precision                 0.517241   0.500000
#&gt; r2                        0.131878   0.046023
#&gt; recall                    0.483871   0.555556
#&gt; rmse                      0.328570   0.325612
#&gt; specificity               0.923077   0.918919</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Convert data frames to H2O frames</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>train_h2o <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(train_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>test_h2o <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(test_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># 3. LIME ----</span></span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co"># 3.1 Making Predictions ----</span></span>
<span id="cb18-4"><a href="#cb18-4"></a></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co"># Making Predictions</span></span>
<span id="cb18-6"><a href="#cb18-6"></a></span>
<span id="cb18-7"><a href="#cb18-7"></a>predictions_tbl <span class="ot">&lt;-</span> automl_leader <span class="sc">%&gt;%</span> </span>
<span id="cb18-8"><a href="#cb18-8"></a>  <span class="fu">h2o.predict</span>(<span class="at">newdata =</span> <span class="fu">as.h2o</span>(test_tbl)) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>  <span class="fu">as.tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>  <span class="fu">bind_cols</span>(</span>
<span id="cb18-11"><a href="#cb18-11"></a>    test_tbl <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>      <span class="fu">select</span>(Attrition, EmployeeNumber)</span>
<span id="cb18-13"><a href="#cb18-13"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: `as.tibble()` was deprecated in tibble 2.0.0.
#&gt; ℹ Please use `as_tibble()` instead.
#&gt; ℹ The signature and semantics have changed, see `?as_tibble`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>predictions_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["predict"],"name":[1],"type":["fct"],"align":["left"]},{"label":["No"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Yes"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Attrition"],"name":[4],"type":["fct"],"align":["left"]},{"label":["EmployeeNumber"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"No","2":"0.994960745","3":"5.039255e-03","4":"No","5":"10"},{"1":"No","2":"0.962936504","3":"3.706350e-02","4":"No","5":"16"},{"1":"No","2":"0.975524478","3":"2.447552e-02","4":"No","5":"30"},{"1":"No","2":"0.986340248","3":"1.365975e-02","4":"Yes","5":"31"},{"1":"No","2":"0.999577057","3":"4.229428e-04","4":"No","5":"40"},{"1":"No","2":"0.994393560","3":"5.606440e-03","4":"Yes","5":"42"},{"1":"No","2":"0.999649144","3":"3.508562e-04","4":"No","5":"46"},{"1":"Yes","2":"0.046988662","3":"9.530113e-01","4":"Yes","5":"55"},{"1":"Yes","2":"0.433569221","3":"5.664308e-01","4":"Yes","5":"64"},{"1":"No","2":"0.999869449","3":"1.305510e-04","4":"No","5":"77"},{"1":"No","2":"0.973886695","3":"2.611330e-02","4":"No","5":"80"},{"1":"No","2":"0.972020613","3":"2.797939e-02","4":"No","5":"83"},{"1":"No","2":"0.991823248","3":"8.176752e-03","4":"No","5":"85"},{"1":"No","2":"0.999926238","3":"7.376190e-05","4":"No","5":"96"},{"1":"No","2":"0.968264963","3":"3.173504e-02","4":"No","5":"121"},{"1":"No","2":"0.988577606","3":"1.142239e-02","4":"No","5":"125"},{"1":"No","2":"0.999997006","3":"2.994311e-06","4":"No","5":"140"},{"1":"No","2":"0.981937786","3":"1.806221e-02","4":"No","5":"145"},{"1":"No","2":"0.999518303","3":"4.816967e-04","4":"No","5":"158"},{"1":"Yes","2":"0.912355610","3":"8.764439e-02","4":"No","5":"159"},{"1":"No","2":"0.994632143","3":"5.367857e-03","4":"No","5":"160"},{"1":"Yes","2":"0.315266143","3":"6.847339e-01","4":"Yes","5":"163"},{"1":"No","2":"0.999178744","3":"8.212562e-04","4":"Yes","5":"165"},{"1":"No","2":"0.990909313","3":"9.090687e-03","4":"Yes","5":"179"},{"1":"No","2":"0.968079969","3":"3.192003e-02","4":"No","5":"184"},{"1":"No","2":"0.995651175","3":"4.348825e-03","4":"No","5":"193"},{"1":"No","2":"0.967704545","3":"3.229546e-02","4":"No","5":"194"},{"1":"No","2":"0.998153764","3":"1.846236e-03","4":"No","5":"197"},{"1":"No","2":"0.999073086","3":"9.269140e-04","4":"No","5":"199"},{"1":"No","2":"0.993404137","3":"6.595863e-03","4":"No","5":"200"},{"1":"No","2":"0.989170641","3":"1.082936e-02","4":"No","5":"204"},{"1":"No","2":"0.999273103","3":"7.268969e-04","4":"No","5":"206"},{"1":"No","2":"0.999630360","3":"3.696403e-04","4":"No","5":"217"},{"1":"Yes","2":"0.871903672","3":"1.280963e-01","4":"No","5":"224"},{"1":"No","2":"0.999926122","3":"7.387800e-05","4":"No","5":"239"},{"1":"Yes","2":"0.335730474","3":"6.642695e-01","4":"Yes","5":"248"},{"1":"No","2":"0.998872039","3":"1.127961e-03","4":"No","5":"252"},{"1":"No","2":"0.999964784","3":"3.521615e-05","4":"No","5":"270"},{"1":"No","2":"0.999658287","3":"3.417125e-04","4":"No","5":"273"},{"1":"No","2":"0.995801720","3":"4.198280e-03","4":"Yes","5":"291"},{"1":"No","2":"0.989606422","3":"1.039358e-02","4":"No","5":"307"},{"1":"No","2":"0.997683900","3":"2.316100e-03","4":"No","5":"309"},{"1":"Yes","2":"0.803032650","3":"1.969674e-01","4":"No","5":"311"},{"1":"No","2":"0.995443359","3":"4.556641e-03","4":"No","5":"312"},{"1":"Yes","2":"0.912788166","3":"8.721183e-02","4":"No","5":"314"},{"1":"Yes","2":"0.899476902","3":"1.005231e-01","4":"No","5":"321"},{"1":"No","2":"0.999991725","3":"8.275114e-06","4":"No","5":"327"},{"1":"No","2":"0.994480313","3":"5.519687e-03","4":"No","5":"333"},{"1":"No","2":"0.999668247","3":"3.317535e-04","4":"No","5":"334"},{"1":"No","2":"0.999951061","3":"4.893863e-05","4":"No","5":"361"},{"1":"No","2":"0.999980762","3":"1.923761e-05","4":"No","5":"367"},{"1":"No","2":"0.965405443","3":"3.459456e-02","4":"No","5":"382"},{"1":"Yes","2":"0.761327453","3":"2.386725e-01","4":"No","5":"390"},{"1":"No","2":"0.999516606","3":"4.833939e-04","4":"No","5":"395"},{"1":"No","2":"0.999096699","3":"9.033012e-04","4":"No","5":"406"},{"1":"No","2":"0.999220867","3":"7.791329e-04","4":"No","5":"412"},{"1":"No","2":"0.999941124","3":"5.887646e-05","4":"No","5":"417"},{"1":"No","2":"0.998952377","3":"1.047623e-03","4":"No","5":"422"},{"1":"No","2":"0.999400054","3":"5.999456e-04","4":"Yes","5":"433"},{"1":"No","2":"0.992914323","3":"7.085677e-03","4":"No","5":"444"},{"1":"No","2":"0.984605063","3":"1.539494e-02","4":"No","5":"451"},{"1":"No","2":"0.998469173","3":"1.530827e-03","4":"No","5":"452"},{"1":"No","2":"0.983692721","3":"1.630728e-02","4":"No","5":"456"},{"1":"No","2":"0.998707884","3":"1.292116e-03","4":"No","5":"465"},{"1":"Yes","2":"0.919068686","3":"8.093131e-02","4":"No","5":"467"},{"1":"No","2":"0.998339657","3":"1.660343e-03","4":"No","5":"474"},{"1":"No","2":"0.998843630","3":"1.156370e-03","4":"No","5":"486"},{"1":"No","2":"0.999861440","3":"1.385605e-04","4":"No","5":"487"},{"1":"No","2":"0.993668533","3":"6.331467e-03","4":"No","5":"495"},{"1":"No","2":"0.994695297","3":"5.304703e-03","4":"No","5":"496"},{"1":"No","2":"0.969743896","3":"3.025610e-02","4":"Yes","5":"510"},{"1":"No","2":"0.929334156","3":"7.066584e-02","4":"No","5":"513"},{"1":"No","2":"0.995558561","3":"4.441439e-03","4":"Yes","5":"538"},{"1":"No","2":"0.997315307","3":"2.684693e-03","4":"No","5":"547"},{"1":"No","2":"0.989842511","3":"1.015749e-02","4":"No","5":"549"},{"1":"No","2":"0.999993732","3":"6.268384e-06","4":"No","5":"550"},{"1":"No","2":"0.999970409","3":"2.959117e-05","4":"No","5":"558"},{"1":"No","2":"0.998013559","3":"1.986441e-03","4":"No","5":"567"},{"1":"No","2":"0.998745530","3":"1.254470e-03","4":"No","5":"568"},{"1":"No","2":"0.999930114","3":"6.988569e-05","4":"No","5":"574"},{"1":"No","2":"0.999361796","3":"6.382043e-04","4":"No","5":"579"},{"1":"No","2":"0.999982817","3":"1.718345e-05","4":"No","5":"581"},{"1":"Yes","2":"0.877226971","3":"1.227730e-01","4":"No","5":"591"},{"1":"No","2":"0.986437271","3":"1.356273e-02","4":"No","5":"623"},{"1":"No","2":"0.999904022","3":"9.597816e-05","4":"No","5":"671"},{"1":"No","2":"0.990937113","3":"9.062887e-03","4":"No","5":"679"},{"1":"No","2":"0.998015503","3":"1.984497e-03","4":"No","5":"690"},{"1":"No","2":"0.999784402","3":"2.155985e-04","4":"No","5":"691"},{"1":"No","2":"0.999991390","3":"8.610230e-06","4":"No","5":"692"},{"1":"Yes","2":"0.807029278","3":"1.929707e-01","4":"Yes","5":"701"},{"1":"Yes","2":"0.083501693","3":"9.164983e-01","4":"Yes","5":"702"},{"1":"No","2":"0.999930014","3":"6.998604e-05","4":"No","5":"707"},{"1":"No","2":"0.998872588","3":"1.127412e-03","4":"No","5":"712"},{"1":"No","2":"0.999910007","3":"8.999267e-05","4":"No","5":"714"},{"1":"No","2":"0.993244227","3":"6.755773e-03","4":"No","5":"716"},{"1":"No","2":"0.999842645","3":"1.573545e-04","4":"No","5":"733"},{"1":"No","2":"0.999797424","3":"2.025756e-04","4":"No","5":"734"},{"1":"No","2":"0.992080945","3":"7.919055e-03","4":"No","5":"758"},{"1":"No","2":"0.999744225","3":"2.557752e-04","4":"No","5":"775"},{"1":"Yes","2":"0.916801757","3":"8.319824e-02","4":"No","5":"784"},{"1":"No","2":"0.999854016","3":"1.459835e-04","4":"No","5":"786"},{"1":"Yes","2":"0.884942780","3":"1.150572e-01","4":"Yes","5":"796"},{"1":"No","2":"0.997168990","3":"2.831010e-03","4":"No","5":"820"},{"1":"Yes","2":"0.867638225","3":"1.323618e-01","4":"Yes","5":"825"},{"1":"No","2":"0.990186922","3":"9.813078e-03","4":"No","5":"834"},{"1":"No","2":"0.982051340","3":"1.794866e-02","4":"No","5":"837"},{"1":"No","2":"0.999057723","3":"9.422770e-04","4":"Yes","5":"840"},{"1":"No","2":"0.975626414","3":"2.437359e-02","4":"No","5":"861"},{"1":"No","2":"0.961189407","3":"3.881059e-02","4":"No","5":"862"},{"1":"Yes","2":"0.896008742","3":"1.039913e-01","4":"No","5":"879"},{"1":"No","2":"0.997023385","3":"2.976615e-03","4":"No","5":"895"},{"1":"Yes","2":"0.641316826","3":"3.586832e-01","4":"No","5":"913"},{"1":"No","2":"0.980125883","3":"1.987412e-02","4":"Yes","5":"927"},{"1":"No","2":"0.999060945","3":"9.390549e-04","4":"No","5":"930"},{"1":"No","2":"0.983067198","3":"1.693280e-02","4":"No","5":"940"},{"1":"No","2":"0.999169102","3":"8.308983e-04","4":"No","5":"949"},{"1":"Yes","2":"0.598153653","3":"4.018463e-01","4":"Yes","5":"960"},{"1":"Yes","2":"0.255672007","3":"7.443280e-01","4":"Yes","5":"970"},{"1":"No","2":"0.994283759","3":"5.716241e-03","4":"No","5":"981"},{"1":"Yes","2":"0.835672688","3":"1.643273e-01","4":"Yes","5":"986"},{"1":"No","2":"0.999563359","3":"4.366409e-04","4":"No","5":"996"},{"1":"No","2":"0.998128310","3":"1.871690e-03","4":"No","5":"1005"},{"1":"No","2":"0.988850777","3":"1.114922e-02","4":"No","5":"1014"},{"1":"Yes","2":"0.271775563","3":"7.282244e-01","4":"Yes","5":"1016"},{"1":"No","2":"0.999984971","3":"1.502856e-05","4":"No","5":"1018"},{"1":"Yes","2":"0.854814388","3":"1.451856e-01","4":"No","5":"1019"},{"1":"No","2":"0.985542348","3":"1.445765e-02","4":"No","5":"1034"},{"1":"Yes","2":"0.696460396","3":"3.035396e-01","4":"No","5":"1055"},{"1":"No","2":"0.952097504","3":"4.790250e-02","4":"Yes","5":"1079"},{"1":"No","2":"0.997303073","3":"2.696927e-03","4":"Yes","5":"1098"},{"1":"Yes","2":"0.896528469","3":"1.034715e-01","4":"Yes","5":"1107"},{"1":"No","2":"0.999079408","3":"9.205921e-04","4":"No","5":"1114"},{"1":"No","2":"0.999240452","3":"7.595481e-04","4":"No","5":"1115"},{"1":"No","2":"0.943357905","3":"5.664209e-02","4":"No","5":"1136"},{"1":"No","2":"0.998877005","3":"1.122995e-03","4":"No","5":"1150"},{"1":"No","2":"0.959523602","3":"4.047640e-02","4":"Yes","5":"1165"},{"1":"No","2":"0.983419613","3":"1.658039e-02","4":"No","5":"1179"},{"1":"No","2":"0.993618511","3":"6.381489e-03","4":"No","5":"1185"},{"1":"Yes","2":"0.914828186","3":"8.517181e-02","4":"Yes","5":"1200"},{"1":"No","2":"0.986779821","3":"1.322018e-02","4":"No","5":"1207"},{"1":"Yes","2":"0.772225715","3":"2.277743e-01","4":"Yes","5":"1210"},{"1":"No","2":"0.987262030","3":"1.273797e-02","4":"No","5":"1211"},{"1":"No","2":"0.963289690","3":"3.671031e-02","4":"No","5":"1234"},{"1":"No","2":"0.998129863","3":"1.870137e-03","4":"No","5":"1238"},{"1":"Yes","2":"0.895967683","3":"1.040323e-01","4":"No","5":"1244"},{"1":"No","2":"0.999155263","3":"8.447368e-04","4":"No","5":"1256"},{"1":"No","2":"0.990883084","3":"9.116916e-03","4":"No","5":"1257"},{"1":"No","2":"0.994554825","3":"5.445175e-03","4":"No","5":"1265"},{"1":"Yes","2":"0.003963391","3":"9.960366e-01","4":"Yes","5":"1273"},{"1":"No","2":"0.991344925","3":"8.655075e-03","4":"No","5":"1278"},{"1":"No","2":"0.999223706","3":"7.762942e-04","4":"No","5":"1306"},{"1":"No","2":"0.997991426","3":"2.008574e-03","4":"No","5":"1317"},{"1":"Yes","2":"0.171741586","3":"8.282584e-01","4":"Yes","5":"1318"},{"1":"No","2":"0.999832402","3":"1.675983e-04","4":"No","5":"1338"},{"1":"No","2":"0.999508961","3":"4.910389e-04","4":"No","5":"1346"},{"1":"No","2":"0.989756474","3":"1.024353e-02","4":"No","5":"1349"},{"1":"Yes","2":"0.913094832","3":"8.690517e-02","4":"No","5":"1350"},{"1":"Yes","2":"0.693429560","3":"3.065704e-01","4":"Yes","5":"1379"},{"1":"No","2":"0.948863365","3":"5.113664e-02","4":"No","5":"1403"},{"1":"No","2":"0.998637915","3":"1.362085e-03","4":"No","5":"1431"},{"1":"No","2":"0.996905638","3":"3.094362e-03","4":"No","5":"1435"},{"1":"Yes","2":"0.754547436","3":"2.454526e-01","4":"No","5":"1440"},{"1":"No","2":"0.991372218","3":"8.627782e-03","4":"No","5":"1465"},{"1":"No","2":"0.990493251","3":"9.506749e-03","4":"No","5":"1466"},{"1":"No","2":"0.974297170","3":"2.570283e-02","4":"No","5":"1481"},{"1":"No","2":"0.991300469","3":"8.699531e-03","4":"No","5":"1482"},{"1":"No","2":"0.997993040","3":"2.006960e-03","4":"No","5":"1485"},{"1":"Yes","2":"0.870166891","3":"1.298331e-01","4":"Yes","5":"1504"},{"1":"No","2":"0.962422286","3":"3.757771e-02","4":"No","5":"1507"},{"1":"No","2":"0.973233758","3":"2.676624e-02","4":"No","5":"1513"},{"1":"No","2":"0.929739568","3":"7.026043e-02","4":"Yes","5":"1522"},{"1":"Yes","2":"0.868566353","3":"1.314336e-01","4":"Yes","5":"1534"},{"1":"No","2":"0.946741750","3":"5.325825e-02","4":"Yes","5":"1537"},{"1":"No","2":"0.998962614","3":"1.037386e-03","4":"No","5":"1543"},{"1":"No","2":"0.962485643","3":"3.751436e-02","4":"No","5":"1547"},{"1":"No","2":"0.981872795","3":"1.812721e-02","4":"No","5":"1563"},{"1":"No","2":"0.999995713","3":"4.286949e-06","4":"No","5":"1578"},{"1":"No","2":"0.985932056","3":"1.406794e-02","4":"No","5":"1601"},{"1":"Yes","2":"0.518954087","3":"4.810459e-01","4":"Yes","5":"1604"},{"1":"Yes","2":"0.752417222","3":"2.475828e-01","4":"No","5":"1612"},{"1":"No","2":"0.999428700","3":"5.713002e-04","4":"No","5":"1615"},{"1":"Yes","2":"0.072568343","3":"9.274317e-01","4":"Yes","5":"1624"},{"1":"No","2":"0.976104297","3":"2.389570e-02","4":"No","5":"1633"},{"1":"No","2":"0.999895079","3":"1.049206e-04","4":"No","5":"1635"},{"1":"No","2":"0.987639411","3":"1.236059e-02","4":"No","5":"1638"},{"1":"Yes","2":"0.385231680","3":"6.147683e-01","4":"Yes","5":"1645"},{"1":"No","2":"0.955457420","3":"4.454258e-02","4":"No","5":"1647"},{"1":"No","2":"0.987130337","3":"1.286966e-02","4":"No","5":"1682"},{"1":"No","2":"0.960376610","3":"3.962339e-02","4":"Yes","5":"1691"},{"1":"No","2":"0.999973091","3":"2.690934e-05","4":"No","5":"1697"},{"1":"No","2":"0.998291039","3":"1.708961e-03","4":"No","5":"1724"},{"1":"No","2":"0.979966373","3":"2.003363e-02","4":"No","5":"1732"},{"1":"No","2":"0.999631300","3":"3.686999e-04","4":"No","5":"1771"},{"1":"No","2":"0.932528890","3":"6.747111e-02","4":"Yes","5":"1783"},{"1":"No","2":"0.986042272","3":"1.395773e-02","4":"No","5":"1790"},{"1":"Yes","2":"0.862116335","3":"1.378837e-01","4":"Yes","5":"1797"},{"1":"No","2":"0.998043061","3":"1.956939e-03","4":"No","5":"1798"},{"1":"No","2":"0.999312526","3":"6.874741e-04","4":"No","5":"1803"},{"1":"Yes","2":"0.893133145","3":"1.068669e-01","4":"No","5":"1813"},{"1":"Yes","2":"0.917835870","3":"8.216413e-02","4":"Yes","5":"1818"},{"1":"No","2":"0.996239194","3":"3.760806e-03","4":"No","5":"1854"},{"1":"No","2":"0.998532855","3":"1.467145e-03","4":"No","5":"1863"},{"1":"No","2":"0.939633543","3":"6.036646e-02","4":"No","5":"1883"},{"1":"No","2":"0.995250300","3":"4.749700e-03","4":"No","5":"1898"},{"1":"No","2":"0.992771479","3":"7.228521e-03","4":"No","5":"1918"},{"1":"No","2":"0.998182466","3":"1.817534e-03","4":"No","5":"1922"},{"1":"Yes","2":"0.216267378","3":"7.837326e-01","4":"Yes","5":"1928"},{"1":"No","2":"0.999920058","3":"7.994176e-05","4":"No","5":"1937"},{"1":"No","2":"0.999662876","3":"3.371236e-04","4":"No","5":"1941"},{"1":"No","2":"0.992981888","3":"7.018112e-03","4":"No","5":"1947"},{"1":"No","2":"0.988980445","3":"1.101956e-02","4":"No","5":"1948"},{"1":"No","2":"0.947282764","3":"5.271724e-02","4":"No","5":"1950"},{"1":"No","2":"0.998828242","3":"1.171758e-03","4":"No","5":"1951"},{"1":"Yes","2":"0.902094276","3":"9.790572e-02","4":"Yes","5":"1967"},{"1":"No","2":"0.999876320","3":"1.236804e-04","4":"No","5":"1979"},{"1":"No","2":"0.999567754","3":"4.322459e-04","4":"No","5":"1989"},{"1":"No","2":"0.984396013","3":"1.560399e-02","4":"No","5":"1994"},{"1":"No","2":"0.997299861","3":"2.700139e-03","4":"No","5":"1998"},{"1":"No","2":"0.993533566","3":"6.466434e-03","4":"No","5":"2019"},{"1":"No","2":"0.998246063","3":"1.753937e-03","4":"No","5":"2041"},{"1":"No","2":"0.995049884","3":"4.950116e-03","4":"No","5":"2068"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>test_tbl <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Rows: 1
#&gt; Columns: 32
#&gt; $ Age                      &lt;dbl&gt; 59
#&gt; $ BusinessTravel           &lt;fct&gt; Travel_Rarely
#&gt; $ DailyRate                &lt;dbl&gt; 1324
#&gt; $ Department               &lt;fct&gt; Research &amp; Development
#&gt; $ DistanceFromHome         &lt;dbl&gt; 3
#&gt; $ Education                &lt;fct&gt; Bachelor
#&gt; $ EducationField           &lt;fct&gt; Medical
#&gt; $ EmployeeNumber           &lt;dbl&gt; 10
#&gt; $ EnvironmentSatisfaction  &lt;fct&gt; High
#&gt; $ Gender                   &lt;fct&gt; Female
#&gt; $ HourlyRate               &lt;dbl&gt; 81
#&gt; $ JobInvolvement           &lt;fct&gt; Very High
#&gt; $ JobLevel                 &lt;fct&gt; 1
#&gt; $ JobRole                  &lt;fct&gt; Laboratory Technician
#&gt; $ JobSatisfaction          &lt;fct&gt; Low
#&gt; $ MaritalStatus            &lt;fct&gt; Married
#&gt; $ MonthlyIncome            &lt;dbl&gt; 2670
#&gt; $ MonthlyRate              &lt;dbl&gt; 9964
#&gt; $ NumCompaniesWorked       &lt;dbl&gt; 4
#&gt; $ OverTime                 &lt;fct&gt; Yes
#&gt; $ PercentSalaryHike        &lt;dbl&gt; 20
#&gt; $ PerformanceRating        &lt;fct&gt; Outstanding
#&gt; $ RelationshipSatisfaction &lt;fct&gt; Low
#&gt; $ StockOptionLevel         &lt;fct&gt; 3
#&gt; $ TotalWorkingYears        &lt;dbl&gt; 12
#&gt; $ TrainingTimesLastYear    &lt;dbl&gt; 3
#&gt; $ WorkLifeBalance          &lt;fct&gt; Good
#&gt; $ YearsAtCompany           &lt;dbl&gt; 1
#&gt; $ YearsInCurrentRole       &lt;dbl&gt; 0
#&gt; $ YearsSinceLastPromotion  &lt;dbl&gt; 0
#&gt; $ YearsWithCurrManager     &lt;dbl&gt; 0
#&gt; $ Attrition                &lt;fct&gt; No</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># 3.2 Single Explanation ----</span></span>
<span id="cb24-2"><a href="#cb24-2"></a></span>
<span id="cb24-3"><a href="#cb24-3"></a>explainer <span class="ot">&lt;-</span> train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>  <span class="fu">select</span>(<span class="sc">-</span>Attrition) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="fu">lime</span>(</span>
<span id="cb24-6"><a href="#cb24-6"></a>    <span class="at">model           =</span> automl_leader,</span>
<span id="cb24-7"><a href="#cb24-7"></a>    <span class="at">bin_continuous  =</span> <span class="cn">TRUE</span>,</span>
<span id="cb24-8"><a href="#cb24-8"></a>    <span class="at">n_bins          =</span> <span class="dv">4</span>,</span>
<span id="cb24-9"><a href="#cb24-9"></a>    <span class="at">quantile_bins   =</span> <span class="cn">TRUE</span></span>
<span id="cb24-10"><a href="#cb24-10"></a>  )</span>
<span id="cb24-11"><a href="#cb24-11"></a></span>
<span id="cb24-12"><a href="#cb24-12"></a>explainer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $model
#&gt; Model Details:
#&gt; ==============
#&gt; 
#&gt; H2OBinomialModel: deeplearning
#&gt; Model ID:  DeepLearning_grid_1_AutoML_1_20240622_153440_model_1 
#&gt; Status of Neuron Layers: predicting Attrition, 2-class classification, bernoulli distribution, CrossEntropy loss, 1.962 weights/biases, 33,3 KB, 9.310 training samples, mini-batch size 1
#&gt;   layer units             type dropout       l1       l2 mean_rate rate_rms
#&gt; 1     1    95            Input 10.00 %       NA       NA        NA       NA
#&gt; 2     2    20 RectifierDropout  0.00 % 0.000000 0.000000  0.173053 0.386098
#&gt; 3     3     2          Softmax      NA 0.000000 0.000000  0.003560 0.006065
#&gt;   momentum mean_weight weight_rms mean_bias bias_rms
#&gt; 1       NA          NA         NA        NA       NA
#&gt; 2 0.000000    0.000639   0.126888  0.503054 0.052989
#&gt; 3 0.000000   -0.032795   1.057629 -0.007708 0.000102
#&gt; 
#&gt; 
#&gt; H2OBinomialMetrics: deeplearning
#&gt; ** Reported on training data. **
#&gt; ** Metrics reported on full training frame **
#&gt; 
#&gt; MSE:  0.07087868
#&gt; RMSE:  0.2662305
#&gt; LogLoss:  0.2694876
#&gt; Mean Per-Class Error:  0.1745662
#&gt; AUC:  0.9065758
#&gt; AUCPR:  0.7661669
#&gt; Gini:  0.8131516
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error      Rate
#&gt; No     879  30 0.033003   =30/909
#&gt; Yes     49 106 0.316129   =49/155
#&gt; Totals 928 136 0.074248  =79/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.186026   0.728522 131
#&gt; 2                       max f2  0.090162   0.729927 187
#&gt; 3                 max f0point5  0.255262   0.770465 113
#&gt; 4                 max accuracy  0.186026   0.925752 131
#&gt; 5                max precision  0.997067   1.000000   0
#&gt; 6                   max recall  0.000314   1.000000 394
#&gt; 7              max specificity  0.997067   1.000000   0
#&gt; 8             max absolute_mcc  0.186026   0.687697 131
#&gt; 9   max min_per_class_accuracy  0.052992   0.825806 235
#&gt; 10 max mean_per_class_accuracy  0.090162   0.841992 187
#&gt; 11                     max tns  0.997067 909.000000   0
#&gt; 12                     max fns  0.997067 154.000000   0
#&gt; 13                     max fps  0.000017 909.000000 399
#&gt; 14                     max tps  0.000314 155.000000 394
#&gt; 15                     max tnr  0.997067   1.000000   0
#&gt; 16                     max fnr  0.997067   0.993548   0
#&gt; 17                     max fpr  0.000017   1.000000 399
#&gt; 18                     max tpr  0.000314   1.000000 394
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: deeplearning
#&gt; ** Reported on validation data. **
#&gt; ** Metrics reported on full validation frame **
#&gt; 
#&gt; MSE:  0.1307555
#&gt; RMSE:  0.3616014
#&gt; LogLoss:  0.5095701
#&gt; Mean Per-Class Error:  0.2560866
#&gt; AUC:  0.8272467
#&gt; AUCPR:  0.6287858
#&gt; Gini:  0.6544934
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error     Rate
#&gt; No     122  25 0.170068  =25/147
#&gt; Yes     13  25 0.342105   =13/38
#&gt; Totals 135  50 0.205405  =38/185
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.070984   0.568182  49
#&gt; 2                       max f2  0.011837   0.681818  89
#&gt; 3                 max f0point5  0.354880   0.660377  16
#&gt; 4                 max accuracy  0.354880   0.854054  16
#&gt; 5                max precision  0.997236   1.000000   0
#&gt; 6                   max recall  0.000458   1.000000 147
#&gt; 7              max specificity  0.997236   1.000000   0
#&gt; 8             max absolute_mcc  0.328621   0.489111  18
#&gt; 9   max min_per_class_accuracy  0.030573   0.736842  65
#&gt; 10 max mean_per_class_accuracy  0.018816   0.751432  76
#&gt; 11                     max tns  0.997236 147.000000   0
#&gt; 12                     max fns  0.997236  37.000000   0
#&gt; 13                     max fps  0.000001 147.000000 184
#&gt; 14                     max tps  0.000458  38.000000 147
#&gt; 15                     max tnr  0.997236   1.000000   0
#&gt; 16                     max fnr  0.997236   0.973684   0
#&gt; 17                     max fpr  0.000001   1.000000 184
#&gt; 18                     max tpr  0.000458   1.000000 147
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; H2OBinomialMetrics: deeplearning
#&gt; ** Reported on cross-validation data. **
#&gt; ** 5-fold cross-validation on training data (Metrics computed for combined holdout predictions) **
#&gt; 
#&gt; MSE:  0.1434779
#&gt; RMSE:  0.3787848
#&gt; LogLoss:  1.717677
#&gt; Mean Per-Class Error:  0.3311012
#&gt; AUC:  0.7357394
#&gt; AUCPR:  0.3992677
#&gt; Gini:  0.4714788
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;         No Yes    Error       Rate
#&gt; No     829  80 0.088009    =80/909
#&gt; Yes     89  66 0.574194    =89/155
#&gt; Totals 918 146 0.158835  =169/1064
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold      value idx
#&gt; 1                       max f1  0.071589   0.438538 138
#&gt; 2                       max f2  0.000002   0.528169 355
#&gt; 3                 max f0point5  0.995865   0.459610  43
#&gt; 4                 max accuracy  0.995865   0.868421  43
#&gt; 5                max precision  1.000000   0.857143   0
#&gt; 6                   max recall  0.000000   1.000000 399
#&gt; 7              max specificity  1.000000   0.998900   0
#&gt; 8             max absolute_mcc  0.071589   0.346343 138
#&gt; 9   max min_per_class_accuracy  0.000002   0.677419 355
#&gt; 10 max mean_per_class_accuracy  0.000029   0.692040 295
#&gt; 11                     max tns  1.000000 908.000000   0
#&gt; 12                     max fns  1.000000 149.000000   0
#&gt; 13                     max fps  0.000000 909.000000 399
#&gt; 14                     max tps  0.000000 155.000000 399
#&gt; 15                     max tnr  1.000000   0.998900   0
#&gt; 16                     max fnr  1.000000   0.961290   0
#&gt; 17                     max fpr  0.000000   1.000000 399
#&gt; 18                     max tpr  0.000000   1.000000 399
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
#&gt; Cross-Validation Metrics Summary: 
#&gt;                              mean       sd cv_1_valid cv_2_valid cv_3_valid
#&gt; accuracy                 0.861852 0.018274   0.845070   0.845070   0.887324
#&gt; auc                      0.803406 0.048768   0.730885   0.852613   0.836674
#&gt; err                      0.138148 0.018274   0.154930   0.154930   0.112676
#&gt; err_count               29.400000 3.911521  33.000000  33.000000  24.000000
#&gt; f0point5                 0.530462 0.076929   0.445860   0.530303   0.655738
#&gt; f1                       0.523352 0.045683   0.459016   0.560000   0.571429
#&gt; f2                       0.521239 0.047936   0.472973   0.593220   0.506329
#&gt; lift_top_group           5.906300 0.815216   4.896552   6.264706   6.264706
#&gt; logloss                  0.476307 0.111504   0.422271   0.417649   0.458768
#&gt; max_per_class_error      0.477916 0.063070   0.517241   0.382353   0.529412
#&gt; mcc                      0.447547 0.058397   0.369469   0.469989   0.526002
#&gt; mean_per_class_accuracy  0.720934 0.024558   0.692466   0.752958   0.718534
#&gt; mean_per_class_error     0.279066 0.024558   0.307534   0.247042   0.281466
#&gt; mse                      0.105194 0.001969   0.105181   0.104028   0.102781
#&gt; pr_auc                   0.516358 0.095565   0.402161   0.609393   0.601468
#&gt; precision                0.538842 0.110070   0.437500   0.512195   0.727273
#&gt; r2                       0.148383 0.080100   0.105701   0.224509   0.233806
#&gt; recall                   0.522084 0.063070   0.482759   0.617647   0.470588
#&gt; rmse                     0.324325 0.003033   0.324317   0.322533   0.320594
#&gt; specificity              0.919784 0.029561   0.902174   0.888268   0.966480
#&gt;                         cv_4_valid cv_5_valid
#&gt; accuracy                  0.859155   0.872641
#&gt; auc                       0.780042   0.816817
#&gt; err                       0.140845   0.127359
#&gt; err_count                30.000000  27.000000
#&gt; f0point5                  0.510204   0.510204
#&gt; f1                        0.500000   0.526316
#&gt; f2                        0.490196   0.543478
#&gt; lift_top_group            6.870968   5.234568
#&gt; logloss                   0.672923   0.409926
#&gt; max_per_class_error       0.516129   0.444444
#&gt; mcc                       0.418454   0.453821
#&gt; mean_per_class_accuracy   0.703474   0.737237
#&gt; mean_per_class_error      0.296526   0.262763
#&gt; mse                       0.107958   0.106023
#&gt; pr_auc                    0.537043   0.431724
#&gt; precision                 0.517241   0.500000
#&gt; r2                        0.131878   0.046023
#&gt; recall                    0.483871   0.555556
#&gt; rmse                      0.328570   0.325612
#&gt; specificity               0.923077   0.918919
#&gt; 
#&gt; $preprocess
#&gt; function (x) 
#&gt; x
#&gt; &lt;bytecode: 0x0000028bfab44720&gt;
#&gt; &lt;environment: 0x0000028bfab32b60&gt;
#&gt; 
#&gt; $bin_continuous
#&gt; [1] TRUE
#&gt; 
#&gt; $n_bins
#&gt; [1] 4
#&gt; 
#&gt; $quantile_bins
#&gt; [1] TRUE
#&gt; 
#&gt; $use_density
#&gt; [1] TRUE
#&gt; 
#&gt; $feature_type
#&gt;                      Age           BusinessTravel                DailyRate 
#&gt;                "numeric"                 "factor"                "numeric" 
#&gt;               Department         DistanceFromHome                Education 
#&gt;                 "factor"                "numeric"                 "factor" 
#&gt;           EducationField           EmployeeNumber  EnvironmentSatisfaction 
#&gt;                 "factor"                "numeric"                 "factor" 
#&gt;                   Gender               HourlyRate           JobInvolvement 
#&gt;                 "factor"                "numeric"                 "factor" 
#&gt;                 JobLevel                  JobRole          JobSatisfaction 
#&gt;                 "factor"                 "factor"                 "factor" 
#&gt;            MaritalStatus            MonthlyIncome              MonthlyRate 
#&gt;                 "factor"                "numeric"                "numeric" 
#&gt;       NumCompaniesWorked                 OverTime        PercentSalaryHike 
#&gt;                "numeric"                 "factor"                "numeric" 
#&gt;        PerformanceRating RelationshipSatisfaction         StockOptionLevel 
#&gt;                 "factor"                 "factor"                 "factor" 
#&gt;        TotalWorkingYears    TrainingTimesLastYear          WorkLifeBalance 
#&gt;                "numeric"                "numeric"                 "factor" 
#&gt;           YearsAtCompany       YearsInCurrentRole  YearsSinceLastPromotion 
#&gt;                "numeric"                "numeric"                "numeric" 
#&gt;     YearsWithCurrManager 
#&gt;                "numeric" 
#&gt; 
#&gt; $bin_cuts
#&gt; $bin_cuts$Age
#&gt;   0%  25%  50%  75% 100% 
#&gt;   18   30   36   43   60 
#&gt; 
#&gt; $bin_cuts$BusinessTravel
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$DailyRate
#&gt;   0%  25%  50%  75% 100% 
#&gt;  102  465  797 1147 1499 
#&gt; 
#&gt; $bin_cuts$Department
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$DistanceFromHome
#&gt;   0%  25%  50%  75% 100% 
#&gt;    1    2    7   14   29 
#&gt; 
#&gt; $bin_cuts$Education
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$EducationField
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$EmployeeNumber
#&gt;   0%  25%  50%  75% 100% 
#&gt;    1  511 1040 1573 2065 
#&gt; 
#&gt; $bin_cuts$EnvironmentSatisfaction
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$Gender
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$HourlyRate
#&gt;   0%  25%  50%  75% 100% 
#&gt;   30   49   66   83  100 
#&gt; 
#&gt; $bin_cuts$JobInvolvement
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$JobLevel
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$JobRole
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$JobSatisfaction
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$MaritalStatus
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$MonthlyIncome
#&gt;    0%   25%   50%   75%  100% 
#&gt;  1051  2929  4908  8474 19999 
#&gt; 
#&gt; $bin_cuts$MonthlyRate
#&gt;    0%   25%   50%   75%  100% 
#&gt;  2094  8423 14470 20689 26968 
#&gt; 
#&gt; $bin_cuts$NumCompaniesWorked
#&gt;   0%  25%  50%  75% 100% 
#&gt;    0    1    2    4    9 
#&gt; 
#&gt; $bin_cuts$OverTime
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$PercentSalaryHike
#&gt;   0%  25%  50%  75% 100% 
#&gt;   11   12   14   18   25 
#&gt; 
#&gt; $bin_cuts$PerformanceRating
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$RelationshipSatisfaction
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$StockOptionLevel
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$TotalWorkingYears
#&gt;   0%  25%  50%  75% 100% 
#&gt;    0    6   10   15   38 
#&gt; 
#&gt; $bin_cuts$TrainingTimesLastYear
#&gt;   0%  25%  50% 100% 
#&gt;    0    2    3    6 
#&gt; 
#&gt; $bin_cuts$WorkLifeBalance
#&gt; NULL
#&gt; 
#&gt; $bin_cuts$YearsAtCompany
#&gt;   0%  25%  50%  75% 100% 
#&gt;    0    3    5    9   37 
#&gt; 
#&gt; $bin_cuts$YearsInCurrentRole
#&gt;   0%  25%  50%  75% 100% 
#&gt;    0    2    3    7   18 
#&gt; 
#&gt; $bin_cuts$YearsSinceLastPromotion
#&gt;   0%  50%  75% 100% 
#&gt;    0    1    2   15 
#&gt; 
#&gt; $bin_cuts$YearsWithCurrManager
#&gt;   0%  25%  50%  75% 100% 
#&gt;    0    2    3    7   17 
#&gt; 
#&gt; 
#&gt; $feature_distribution
#&gt; $feature_distribution$Age
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.2602082 0.2834267 0.2217774 0.2345877 
#&gt; 
#&gt; $feature_distribution$BusinessTravel
#&gt; 
#&gt;        Non-Travel     Travel_Rarely Travel_Frequently 
#&gt;         0.1000801         0.7181745         0.1817454 
#&gt; 
#&gt; $feature_distribution$DailyRate
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.2514011 0.2489992 0.2497998 0.2497998 
#&gt; 
#&gt; $feature_distribution$Department
#&gt; 
#&gt;        Human Resources Research &amp; Development                  Sales 
#&gt;             0.04323459             0.65092074             0.30584468 
#&gt; 
#&gt; $feature_distribution$DistanceFromHome
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.2954363 0.2369896 0.2241793 0.2433947 
#&gt; 
#&gt; $feature_distribution$Education
#&gt; 
#&gt; Below College       College      Bachelor        Master        Doctor 
#&gt;    0.11689351    0.18895116    0.38510809    0.27461970    0.03442754 
#&gt; 
#&gt; $feature_distribution$EducationField
#&gt; 
#&gt;  Human Resources    Life Sciences        Marketing          Medical 
#&gt;       0.01761409       0.41793435       0.10888711       0.31144916 
#&gt;            Other Technical Degree 
#&gt;       0.05444355       0.08967174 
#&gt; 
#&gt; $feature_distribution$EmployeeNumber
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.2506005 0.2497998 0.2497998 0.2497998 
#&gt; 
#&gt; $feature_distribution$EnvironmentSatisfaction
#&gt; 
#&gt;       Low    Medium      High Very High 
#&gt; 0.1913531 0.1961569 0.3018415 0.3106485 
#&gt; 
#&gt; $feature_distribution$Gender
#&gt; 
#&gt;    Female      Male 
#&gt; 0.4123299 0.5876701 
#&gt; 
#&gt; $feature_distribution$HourlyRate
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.2618094 0.2473979 0.2449960 0.2457966 
#&gt; 
#&gt; $feature_distribution$JobInvolvement
#&gt; 
#&gt;        Low     Medium       High  Very High 
#&gt; 0.05684548 0.25780624 0.58927142 0.09607686 
#&gt; 
#&gt; $feature_distribution$JobLevel
#&gt; 
#&gt;          1          2          3          4          5 
#&gt; 0.36829464 0.36509207 0.14651721 0.07526021 0.04483587 
#&gt; 
#&gt; $feature_distribution$JobRole
#&gt; 
#&gt; Healthcare Representative           Human Resources     Laboratory Technician 
#&gt;                0.08646918                0.03682946                0.18174540 
#&gt;                   Manager    Manufacturing Director         Research Director 
#&gt;                0.06885508                0.09927942                0.05924740 
#&gt;        Research Scientist           Sales Executive      Sales Representative 
#&gt;                0.18654924                0.22337870                0.05764612 
#&gt; 
#&gt; $feature_distribution$JobSatisfaction
#&gt; 
#&gt;       Low    Medium      High Very High 
#&gt; 0.1873499 0.1985588 0.3018415 0.3122498 
#&gt; 
#&gt; $feature_distribution$MaritalStatus
#&gt; 
#&gt;    Single   Married  Divorced 
#&gt; 0.3306645 0.4571657 0.2121697 
#&gt; 
#&gt; $feature_distribution$MonthlyIncome
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.2506005 0.2497998 0.2497998 0.2497998 
#&gt; 
#&gt; $feature_distribution$MonthlyRate
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.2506005 0.2497998 0.2497998 0.2497998 
#&gt; 
#&gt; $feature_distribution$NumCompaniesWorked
#&gt; 
#&gt;          1          2          3          4 
#&gt; 0.48118495 0.09927942 0.20496397 0.21457166 
#&gt; 
#&gt; $feature_distribution$OverTime
#&gt; 
#&gt;        No       Yes 
#&gt; 0.7165733 0.2834267 
#&gt; 
#&gt; $feature_distribution$PercentSalaryHike
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.2866293 0.2738191 0.2289832 0.2105685 
#&gt; 
#&gt; $feature_distribution$PerformanceRating
#&gt; 
#&gt;         Low        Good   Excellent Outstanding 
#&gt;   0.0000000   0.0000000   0.8414732   0.1585268 
#&gt; 
#&gt; $feature_distribution$RelationshipSatisfaction
#&gt; 
#&gt;       Low    Medium      High Very High 
#&gt; 0.1889512 0.2161729 0.3018415 0.2930344 
#&gt; 
#&gt; $feature_distribution$StockOptionLevel
#&gt; 
#&gt;          0          1          2          3 
#&gt; 0.43554844 0.40592474 0.10168135 0.05684548 
#&gt; 
#&gt; $feature_distribution$TotalWorkingYears
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.3050440 0.3306645 0.1224980 0.2417934 
#&gt; 
#&gt; $feature_distribution$TrainingTimesLastYear
#&gt; 
#&gt;         1         2         3 
#&gt; 0.4603683 0.3306645 0.2089672 
#&gt; 
#&gt; $feature_distribution$WorkLifeBalance
#&gt; 
#&gt;        Bad       Good     Better       Best 
#&gt; 0.05204163 0.22497998 0.61889512 0.10408327 
#&gt; 
#&gt; $feature_distribution$YearsAtCompany
#&gt; 
#&gt;         1         2         3         4 
#&gt; 0.3226581 0.2137710 0.2217774 0.2417934 
#&gt; 
#&gt; $feature_distribution$YearsInCurrentRole
#&gt; 
#&gt;          1          2          3          4 
#&gt; 0.46757406 0.08726982 0.27542034 0.16973579 
#&gt; 
#&gt; $feature_distribution$YearsSinceLastPromotion
#&gt; 
#&gt;         1         2         3 
#&gt; 0.6413131 0.1120897 0.2465973 
#&gt; 
#&gt; $feature_distribution$YearsWithCurrManager
#&gt; 
#&gt;          1          2          3          4 
#&gt; 0.46357086 0.09767814 0.25300240 0.18574860 
#&gt; 
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "data_frame_explainer" "explainer"            "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>explanation <span class="ot">&lt;-</span> test_tbl <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">select</span>(<span class="sc">-</span>Attrition) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>  lime<span class="sc">::</span><span class="fu">explain</span>(</span>
<span id="cb26-5"><a href="#cb26-5"></a>    </span>
<span id="cb26-6"><a href="#cb26-6"></a>    <span class="co"># Pass our explainer object</span></span>
<span id="cb26-7"><a href="#cb26-7"></a>    <span class="at">explainer =</span> explainer,</span>
<span id="cb26-8"><a href="#cb26-8"></a>    <span class="co"># Because it is a binary classification model: 1</span></span>
<span id="cb26-9"><a href="#cb26-9"></a>    <span class="at">n_labels   =</span> <span class="dv">1</span>,</span>
<span id="cb26-10"><a href="#cb26-10"></a>    <span class="co"># number of features to be returned</span></span>
<span id="cb26-11"><a href="#cb26-11"></a>    <span class="at">n_features =</span> <span class="dv">8</span>,</span>
<span id="cb26-12"><a href="#cb26-12"></a>    <span class="co"># number of localized linear models</span></span>
<span id="cb26-13"><a href="#cb26-13"></a>    <span class="at">n_permutations =</span> <span class="dv">5000</span>,</span>
<span id="cb26-14"><a href="#cb26-14"></a>    <span class="co"># Let's start with 1</span></span>
<span id="cb26-15"><a href="#cb26-15"></a>    <span class="at">kernel_width   =</span> <span class="dv">1</span></span>
<span id="cb26-16"><a href="#cb26-16"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>explanation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["model_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["case"],"name":[2],"type":["chr"],"align":["left"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["label_prob"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["model_r2"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["model_intercept"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["model_prediction"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["feature"],"name":[8],"type":["chr"],"align":["left"]},{"label":["feature_value"],"name":[9],"type":["fct"],"align":["left"]},{"label":["feature_weight"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["feature_desc"],"name":[11],"type":["chr"],"align":["left"]},{"label":["data"],"name":[12],"type":["list"],"align":["right"]},{"label":["prediction"],"name":[13],"type":["list"],"align":["right"]}],"data":[{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.1963158","6":"0.9177318","7":"0.8289263","8":"OverTime","9":"Yes","10":"-0.13386604","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.1963158","6":"0.9177318","7":"0.8289263","8":"Department","9":"Research & Development","10":"0.05173782","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.1963158","6":"0.9177318","7":"0.8289263","8":"JobLevel","9":"1","10":"-0.04891027","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.1963158","6":"0.9177318","7":"0.8289263","8":"JobInvolvement","9":"Very High","10":"0.04752984","11":"JobInvolvement = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.1963158","6":"0.9177318","7":"0.8289263","8":"RelationshipSatisfaction","9":"Low","10":"-0.04212035","11":"RelationshipSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.1963158","6":"0.9177318","7":"0.8289263","8":"BusinessTravel","9":"Travel_Rarely","10":"0.03786337","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.1963158","6":"0.9177318","7":"0.8289263","8":"StockOptionLevel","9":"3","10":"-0.03785315","11":"StockOptionLevel = 3","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.1963158","6":"0.9177318","7":"0.8289263","8":"PerformanceRating","9":"Outstanding","10":"0.03681328","11":"PerformanceRating = Outstanding","12":"<named list [31]>","13":"<named list [2]>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>explanation <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="fu">as.tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="fu">select</span>(feature<span class="sc">:</span>prediction) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["feature"],"name":[1],"type":["chr"],"align":["left"]},{"label":["feature_value"],"name":[2],"type":["fct"],"align":["left"]},{"label":["feature_weight"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["feature_desc"],"name":[4],"type":["chr"],"align":["left"]},{"label":["data"],"name":[5],"type":["list"],"align":["right"]},{"label":["prediction"],"name":[6],"type":["list"],"align":["right"]}],"data":[{"1":"OverTime","2":"Yes","3":"-0.13386604","4":"OverTime = Yes","5":"<named list [31]>","6":"<named list [2]>"},{"1":"Department","2":"Research & Development","3":"0.05173782","4":"Department = Research & Development","5":"<named list [31]>","6":"<named list [2]>"},{"1":"JobLevel","2":"1","3":"-0.04891027","4":"JobLevel = 1","5":"<named list [31]>","6":"<named list [2]>"},{"1":"JobInvolvement","2":"Very High","3":"0.04752984","4":"JobInvolvement = Very High","5":"<named list [31]>","6":"<named list [2]>"},{"1":"RelationshipSatisfaction","2":"Low","3":"-0.04212035","4":"RelationshipSatisfaction = Low","5":"<named list [31]>","6":"<named list [2]>"},{"1":"BusinessTravel","2":"Travel_Rarely","3":"0.03786337","4":"BusinessTravel = Travel_Rarely","5":"<named list [31]>","6":"<named list [2]>"},{"1":"StockOptionLevel","2":"3","3":"-0.03785315","4":"StockOptionLevel = 3","5":"<named list [31]>","6":"<named list [2]>"},{"1":"PerformanceRating","2":"Outstanding","3":"0.03681328","4":"PerformanceRating = Outstanding","5":"<named list [31]>","6":"<named list [2]>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>g <span class="ot">&lt;-</span> <span class="fu">plot_features</span>(<span class="at">explanation =</span> explanation, <span class="at">ncol =</span> <span class="dv">1</span>)</span>
<span id="cb30-2"><a href="#cb30-2"></a>g</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="co"># 3.3 Multiple Explanations ----</span></span>
<span id="cb31-2"><a href="#cb31-2"></a></span>
<span id="cb31-3"><a href="#cb31-3"></a>explanation <span class="ot">&lt;-</span> test_tbl <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5"></a>  <span class="fu">select</span>(<span class="sc">-</span>Attrition) <span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a href="#cb31-6"></a>  lime<span class="sc">::</span><span class="fu">explain</span>(</span>
<span id="cb31-7"><a href="#cb31-7"></a>    <span class="at">explainer =</span> explainer,</span>
<span id="cb31-8"><a href="#cb31-8"></a>    <span class="at">n_labels   =</span> <span class="dv">1</span>,</span>
<span id="cb31-9"><a href="#cb31-9"></a>    <span class="at">n_features =</span> <span class="dv">8</span>,</span>
<span id="cb31-10"><a href="#cb31-10"></a>    <span class="at">n_permutations =</span> <span class="dv">5000</span>,</span>
<span id="cb31-11"><a href="#cb31-11"></a>    <span class="at">kernel_width   =</span> <span class="fl">0.5</span></span>
<span id="cb31-12"><a href="#cb31-12"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 1, 5, 2, 1, 2, 4, 26)):
#&gt; ungültiges Faktorniveau, NA erzeugt</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt
#&gt; Warning in `[&lt;-.factor`(`*tmp*`, ri, value = c(1, 4, 0, 2, 1, 1, 1, 2)):
#&gt; ungültiges Faktorniveau, NA erzeugt</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>explanation <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">as.tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["model_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["case"],"name":[2],"type":["chr"],"align":["left"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["label_prob"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["model_r2"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["model_intercept"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["model_prediction"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["feature"],"name":[8],"type":["chr"],"align":["left"]},{"label":["feature_value"],"name":[9],"type":["fct"],"align":["left"]},{"label":["feature_weight"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["feature_desc"],"name":[11],"type":["chr"],"align":["left"]},{"label":["data"],"name":[12],"type":["list"],"align":["right"]},{"label":["prediction"],"name":[13],"type":["list"],"align":["right"]}],"data":[{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.2019430","6":"0.91680813","7":"0.8327217","8":"OverTime","9":"Yes","10":"-0.13852939","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.2019430","6":"0.91680813","7":"0.8327217","8":"Department","9":"Research & Development","10":"0.05271318","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.2019430","6":"0.91680813","7":"0.8327217","8":"JobSatisfaction","9":"Low","10":"-0.04725802","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.2019430","6":"0.91680813","7":"0.8327217","8":"JobLevel","9":"1","10":"-0.04411599","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.2019430","6":"0.91680813","7":"0.8327217","8":"PerformanceRating","9":"Outstanding","10":"0.04794641","11":"PerformanceRating = Outstanding","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.2019430","6":"0.91680813","7":"0.8327217","8":"BusinessTravel","9":"Travel_Rarely","10":"0.04159401","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.2019430","6":"0.91680813","7":"0.8327217","8":"JobInvolvement","9":"Very High","10":"0.03997198","11":"JobInvolvement = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.9949607","5":"0.2019430","6":"0.91680813","7":"0.8327217","8":"RelationshipSatisfaction","9":"Low","10":"-0.03640862","11":"RelationshipSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9629365","5":"0.2463628","6":"0.82475167","7":"0.8156928","8":"OverTime","9":"1","10":"0.13854744","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9629365","5":"0.2463628","6":"0.82475167","7":"0.8156928","8":"EnvironmentSatisfaction","9":"1","10":"-0.06209546","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9629365","5":"0.2463628","6":"0.82475167","7":"0.8156928","8":"TotalWorkingYears","9":"5","10":"-0.05199507","11":"TotalWorkingYears <= 6","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9629365","5":"0.2463628","6":"0.82475167","7":"0.8156928","8":"Department","9":"2","10":"0.05014097","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9629365","5":"0.2463628","6":"0.82475167","7":"0.8156928","8":"JobLevel","9":"1","10":"-0.05217778","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9629365","5":"0.2463628","6":"0.82475167","7":"0.8156928","8":"BusinessTravel","9":"2","10":"0.04325191","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9629365","5":"0.2463628","6":"0.82475167","7":"0.8156928","8":"YearsSinceLastPromotion","9":"4","10":"-0.03925249","11":"2 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9629365","5":"0.2463628","6":"0.82475167","7":"0.8156928","8":"DistanceFromHome","9":"NA","10":"-0.03547839","11":"14 < DistanceFromHome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9755245","5":"0.2304968","6":"0.81498225","7":"0.9093258","8":"OverTime","9":"1","10":"0.13157340","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9755245","5":"0.2304968","6":"0.81498225","7":"0.9093258","8":"JobSatisfaction","9":"4","10":"0.05536301","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9755245","5":"0.2304968","6":"0.81498225","7":"0.9093258","8":"TotalWorkingYears","9":"NA","10":"-0.05434609","11":"TotalWorkingYears <= 6","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9755245","5":"0.2304968","6":"0.81498225","7":"0.9093258","8":"Department","9":"2","10":"0.05301257","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9755245","5":"0.2304968","6":"0.81498225","7":"0.9093258","8":"JobLevel","9":"1","10":"-0.04715185","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9755245","5":"0.2304968","6":"0.81498225","7":"0.9093258","8":"MaritalStatus","9":"1","10":"-0.04059950","11":"MaritalStatus = Single","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9755245","5":"0.2304968","6":"0.81498225","7":"0.9093258","8":"StockOptionLevel","9":"1","10":"-0.04053380","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9755245","5":"0.2304968","6":"0.81498225","7":"0.9093258","8":"BusinessTravel","9":"2","10":"0.03702582","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9863402","5":"0.1944456","6":"0.82321953","7":"0.9124557","8":"OverTime","9":"1","10":"0.12944347","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9863402","5":"0.1944456","6":"0.82321953","7":"0.9124557","8":"Department","9":"2","10":"0.04260803","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9863402","5":"0.1944456","6":"0.82321953","7":"0.9124557","8":"JobLevel","9":"1","10":"-0.04197470","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9863402","5":"0.1944456","6":"0.82321953","7":"0.9124557","8":"JobSatisfaction","9":"1","10":"-0.04014841","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9863402","5":"0.1944456","6":"0.82321953","7":"0.9124557","8":"BusinessTravel","9":"2","10":"0.03893292","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9863402","5":"0.1944456","6":"0.82321953","7":"0.9124557","8":"MaritalStatus","9":"1","10":"-0.03669388","11":"MaritalStatus = Single","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9863402","5":"0.1944456","6":"0.82321953","7":"0.9124557","8":"PerformanceRating","9":"3","10":"-0.03550160","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9863402","5":"0.1944456","6":"0.82321953","7":"0.9124557","8":"YearsSinceLastPromotion","9":"1","10":"0.03257040","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9995771","5":"0.2239053","6":"0.86054884","7":"0.9612969","8":"OverTime","9":"2","10":"-0.12905894","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9995771","5":"0.2239053","6":"0.86054884","7":"0.9612969","8":"JobLevel","9":"2","10":"0.05950868","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9995771","5":"0.2239053","6":"0.86054884","7":"0.9612969","8":"JobSatisfaction","9":"4","10":"0.05451007","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9995771","5":"0.2239053","6":"0.86054884","7":"0.9612969","8":"Department","9":"2","10":"0.05033932","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9995771","5":"0.2239053","6":"0.86054884","7":"0.9612969","8":"EnvironmentSatisfaction","9":"4","10":"0.03700914","11":"EnvironmentSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9995771","5":"0.2239053","6":"0.86054884","7":"0.9612969","8":"StockOptionLevel","9":"1","10":"-0.03408386","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9995771","5":"0.2239053","6":"0.86054884","7":"0.9612969","8":"BusinessTravel","9":"2","10":"0.03349341","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9995771","5":"0.2239053","6":"0.86054884","7":"0.9612969","8":"DailyRate","9":"NA","10":"0.02903023","11":"1147 < DailyRate","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9943936","5":"0.2285915","6":"0.81779559","7":"1.0222463","8":"OverTime","9":"1","10":"0.12656024","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9943936","5":"0.2285915","6":"0.81779559","7":"1.0222463","8":"TotalWorkingYears","9":"NA","10":"0.05814522","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9943936","5":"0.2285915","6":"0.81779559","7":"1.0222463","8":"JobSatisfaction","9":"4","10":"0.05700476","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9943936","5":"0.2285915","6":"0.81779559","7":"1.0222463","8":"JobLevel","9":"2","10":"0.05477646","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9943936","5":"0.2285915","6":"0.81779559","7":"1.0222463","8":"JobRole","9":"NA","10":"-0.04617395","11":"JobRole = Sales Representative","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9943936","5":"0.2285915","6":"0.81779559","7":"1.0222463","8":"Department","9":"3","10":"-0.04619494","11":"Department = Sales","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9943936","5":"0.2285915","6":"0.81779559","7":"1.0222463","8":"PerformanceRating","9":"3","10":"-0.03983863","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9943936","5":"0.2285915","6":"0.81779559","7":"1.0222463","8":"EnvironmentSatisfaction","9":"4","10":"0.04017156","11":"EnvironmentSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9996491","5":"0.2289047","6":"0.80426250","7":"0.9836407","8":"OverTime","9":"1","10":"0.14608808","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9996491","5":"0.2289047","6":"0.80426250","7":"0.9836407","8":"TotalWorkingYears","9":"NA","10":"-0.04655481","11":"TotalWorkingYears <= 6","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9996491","5":"0.2289047","6":"0.80426250","7":"0.9836407","8":"Department","9":"2","10":"0.04599802","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9996491","5":"0.2289047","6":"0.80426250","7":"0.9836407","8":"JobLevel","9":"1","10":"-0.04571389","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9996491","5":"0.2289047","6":"0.80426250","7":"0.9836407","8":"BusinessTravel","9":"2","10":"0.03953276","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9996491","5":"0.2289047","6":"0.80426250","7":"0.9836407","8":"JobInvolvement","9":"4","10":"0.03772835","11":"JobInvolvement = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9996491","5":"0.2289047","6":"0.80426250","7":"0.9836407","8":"PerformanceRating","9":"3","10":"-0.03372863","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9996491","5":"0.2289047","6":"0.80426250","7":"0.9836407","8":"EnvironmentSatisfaction","9":"4","10":"0.03602829","11":"EnvironmentSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.9530113","5":"0.2429123","6":"0.12867950","7":"0.2667432","8":"OverTime","9":"1","10":"-0.13625477","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.9530113","5":"0.2429123","6":"0.12867950","7":"0.2667432","8":"EnvironmentSatisfaction","9":"1","10":"0.07322912","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.9530113","5":"0.2429123","6":"0.12867950","7":"0.2667432","8":"JobInvolvement","9":"1","10":"0.06945956","11":"JobInvolvement = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.9530113","5":"0.2429123","6":"0.12867950","7":"0.2667432","8":"Department","9":"2","10":"-0.05431672","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.9530113","5":"0.2429123","6":"0.12867950","7":"0.2667432","8":"MaritalStatus","9":"1","10":"0.04862920","11":"MaritalStatus = Single","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.9530113","5":"0.2429123","6":"0.12867950","7":"0.2667432","8":"TotalWorkingYears","9":"1","10":"0.04964683","11":"TotalWorkingYears <= 6","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.9530113","5":"0.2429123","6":"0.12867950","7":"0.2667432","8":"JobLevel","9":"1","10":"0.04448628","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.9530113","5":"0.2429123","6":"0.12867950","7":"0.2667432","8":"StockOptionLevel","9":"1","10":"0.04318420","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"Yes","4":"0.5664308","5":"0.2539891","6":"0.05698312","7":"0.2555469","8":"OverTime","9":"2","10":"0.14331076","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"Yes","4":"0.5664308","5":"0.2539891","6":"0.05698312","7":"0.2555469","8":"EnvironmentSatisfaction","9":"1","10":"0.08741489","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"Yes","4":"0.5664308","5":"0.2539891","6":"0.05698312","7":"0.2555469","8":"TotalWorkingYears","9":"NA","10":"-0.06467978","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"Yes","4":"0.5664308","5":"0.2539891","6":"0.05698312","7":"0.2555469","8":"Department","9":"2","10":"-0.05258471","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"Yes","4":"0.5664308","5":"0.2539891","6":"0.05698312","7":"0.2555469","8":"StockOptionLevel","9":"1","10":"0.04432633","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"Yes","4":"0.5664308","5":"0.2539891","6":"0.05698312","7":"0.2555469","8":"MaritalStatus","9":"1","10":"0.04032655","11":"MaritalStatus = Single","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"Yes","4":"0.5664308","5":"0.2539891","6":"0.05698312","7":"0.2555469","8":"BusinessTravel","9":"2","10":"-0.03742627","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"Yes","4":"0.5664308","5":"0.2539891","6":"0.05698312","7":"0.2555469","8":"JobInvolvement","9":"2","10":"0.03787607","11":"JobInvolvement = Medium","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.9998694","5":"0.2418539","6":"0.74792129","7":"0.9892668","8":"OverTime","9":"1","10":"0.13903662","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.9998694","5":"0.2418539","6":"0.74792129","7":"0.9892668","8":"EnvironmentSatisfaction","9":"1","10":"-0.08609010","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.9998694","5":"0.2418539","6":"0.74792129","7":"0.9892668","8":"JobLevel","9":"2","10":"0.06430785","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.9998694","5":"0.2418539","6":"0.74792129","7":"0.9892668","8":"Department","9":"2","10":"0.04953880","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.9998694","5":"0.2418539","6":"0.74792129","7":"0.9892668","8":"BusinessTravel","9":"2","10":"0.04154682","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.9998694","5":"0.2418539","6":"0.74792129","7":"0.9892668","8":"RelationshipSatisfaction","9":"3","10":"0.02917952","11":"RelationshipSatisfaction = High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.9998694","5":"0.2418539","6":"0.74792129","7":"0.9892668","8":"YearsSinceLastPromotion","9":"NA","10":"0.03202156","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.9998694","5":"0.2418539","6":"0.74792129","7":"0.9892668","8":"PerformanceRating","9":"3","10":"-0.02819553","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9738867","5":"0.2209518","6":"0.94540597","7":"0.8044867","8":"OverTime","9":"2","10":"-0.13658490","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9738867","5":"0.2209518","6":"0.94540597","7":"0.8044867","8":"TotalWorkingYears","9":"NA","10":"0.06130591","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9738867","5":"0.2209518","6":"0.94540597","7":"0.8044867","8":"Department","9":"2","10":"0.05354595","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9738867","5":"0.2209518","6":"0.94540597","7":"0.8044867","8":"NumCompaniesWorked","9":"5","10":"-0.04645061","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9738867","5":"0.2209518","6":"0.94540597","7":"0.8044867","8":"YearsSinceLastPromotion","9":"NA","10":"-0.03798741","11":"2 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9738867","5":"0.2209518","6":"0.94540597","7":"0.8044867","8":"JobInvolvement","9":"2","10":"-0.03376393","11":"JobInvolvement = Medium","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9738867","5":"0.2209518","6":"0.94540597","7":"0.8044867","8":"BusinessTravel","9":"2","10":"0.03162879","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9738867","5":"0.2209518","6":"0.94540597","7":"0.8044867","8":"PerformanceRating","9":"3","10":"-0.03261307","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9720206","5":"0.1983961","6":"0.79518659","7":"0.9770940","8":"OverTime","9":"1","10":"0.12997216","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9720206","5":"0.1983961","6":"0.79518659","7":"0.9770940","8":"TotalWorkingYears","9":"NA","10":"0.05508110","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9720206","5":"0.1983961","6":"0.79518659","7":"0.9770940","8":"Department","9":"2","10":"0.05017749","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9720206","5":"0.1983961","6":"0.79518659","7":"0.9770940","8":"YearsSinceLastPromotion","9":"NA","10":"-0.04849741","11":"2 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9720206","5":"0.1983961","6":"0.79518659","7":"0.9770940","8":"JobSatisfaction","9":"3","10":"-0.03603746","11":"JobSatisfaction = High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9720206","5":"0.1983961","6":"0.79518659","7":"0.9770940","8":"NumCompaniesWorked","9":"1","10":"0.03274635","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9720206","5":"0.1983961","6":"0.79518659","7":"0.9770940","8":"PerformanceRating","9":"3","10":"-0.03246691","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9720206","5":"0.1983961","6":"0.79518659","7":"0.9770940","8":"BusinessTravel","9":"2","10":"0.03093212","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9918232","5":"0.2417554","6":"0.85740530","7":"0.8848185","8":"OverTime","9":"1","10":"0.13869820","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9918232","5":"0.2417554","6":"0.85740530","7":"0.8848185","8":"BusinessTravel","9":"3","10":"-0.05935704","11":"BusinessTravel = Travel_Frequently","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9918232","5":"0.2417554","6":"0.85740530","7":"0.8848185","8":"JobLevel","9":"2","10":"0.05565366","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9918232","5":"0.2417554","6":"0.85740530","7":"0.8848185","8":"Department","9":"2","10":"0.05202334","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9918232","5":"0.2417554","6":"0.85740530","7":"0.8848185","8":"TotalWorkingYears","9":"NA","10":"-0.04361401","11":"TotalWorkingYears <= 6","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9918232","5":"0.2417554","6":"0.85740530","7":"0.8848185","8":"StockOptionLevel","9":"1","10":"-0.04011857","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9918232","5":"0.2417554","6":"0.85740530","7":"0.8848185","8":"PerformanceRating","9":"3","10":"-0.03873296","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9918232","5":"0.2417554","6":"0.85740530","7":"0.8848185","8":"MaritalStatus","9":"1","10":"-0.03713946","11":"MaritalStatus = Single","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9999262","5":"0.2102336","6":"0.74409359","7":"1.0876402","8":"OverTime","9":"1","10":"0.12903065","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9999262","5":"0.2102336","6":"0.74409359","7":"1.0876402","8":"JobLevel","9":"2","10":"0.06055511","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9999262","5":"0.2102336","6":"0.74409359","7":"1.0876402","8":"Department","9":"2","10":"0.05902502","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9999262","5":"0.2102336","6":"0.74409359","7":"1.0876402","8":"BusinessTravel","9":"2","10":"0.03871904","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9999262","5":"0.2102336","6":"0.74409359","7":"1.0876402","8":"StockOptionLevel","9":"3","10":"0.03596893","11":"StockOptionLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9999262","5":"0.2102336","6":"0.74409359","7":"1.0876402","8":"PerformanceRating","9":"3","10":"-0.02870960","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9999262","5":"0.2102336","6":"0.74409359","7":"1.0876402","8":"YearsSinceLastPromotion","9":"NA","10":"0.02419217","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9999262","5":"0.2102336","6":"0.74409359","7":"1.0876402","8":"YearsWithCurrManager","9":"NA","10":"0.02476525","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9682650","5":"0.2101185","6":"0.93850388","7":"0.8998998","8":"OverTime","9":"2","10":"-0.13153509","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9682650","5":"0.2101185","6":"0.93850388","7":"0.8998998","8":"JobLevel","9":"2","10":"0.06380134","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9682650","5":"0.2101185","6":"0.93850388","7":"0.8998998","8":"Department","9":"3","10":"-0.05262478","11":"Department = Sales","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9682650","5":"0.2101185","6":"0.93850388","7":"0.8998998","8":"PerformanceRating","9":"3","10":"-0.04247490","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9682650","5":"0.2101185","6":"0.93850388","7":"0.8998998","8":"BusinessTravel","9":"2","10":"0.03445305","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9682650","5":"0.2101185","6":"0.93850388","7":"0.8998998","8":"NumCompaniesWorked","9":"1","10":"0.03100392","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9682650","5":"0.2101185","6":"0.93850388","7":"0.8998998","8":"DailyRate","9":"NA","10":"0.03003394","11":"1147 < DailyRate","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9682650","5":"0.2101185","6":"0.93850388","7":"0.8998998","8":"TrainingTimesLastYear","9":"4","10":"0.02873845","11":"3 < TrainingTimesLastYear","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.9885776","5":"0.2230841","6":"0.82291943","7":"0.9038545","8":"OverTime","9":"1","10":"0.13547583","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.9885776","5":"0.2230841","6":"0.82291943","7":"0.9038545","8":"Department","9":"3","10":"-0.05705709","11":"Department = Sales","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.9885776","5":"0.2230841","6":"0.82291943","7":"0.9038545","8":"JobLevel","9":"2","10":"0.05329661","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.9885776","5":"0.2230841","6":"0.82291943","7":"0.9038545","8":"YearsSinceLastPromotion","9":"5","10":"-0.04583787","11":"2 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.9885776","5":"0.2230841","6":"0.82291943","7":"0.9038545","8":"MaritalStatus","9":"1","10":"-0.03898546","11":"MaritalStatus = Single","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.9885776","5":"0.2230841","6":"0.82291943","7":"0.9038545","8":"BusinessTravel","9":"2","10":"0.03390072","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.9885776","5":"0.2230841","6":"0.82291943","7":"0.9038545","8":"StockOptionLevel","9":"1","10":"-0.03203219","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.9885776","5":"0.2230841","6":"0.82291943","7":"0.9038545","8":"NumCompaniesWorked","9":"1","10":"0.03217452","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9999970","5":"0.1833973","6":"0.78597567","7":"1.0327555","8":"OverTime","9":"1","10":"0.12568182","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9999970","5":"0.1833973","6":"0.78597567","7":"1.0327555","8":"TotalWorkingYears","9":"NA","10":"0.05522158","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9999970","5":"0.1833973","6":"0.78597567","7":"1.0327555","8":"JobSatisfaction","9":"4","10":"0.04458724","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9999970","5":"0.1833973","6":"0.78597567","7":"1.0327555","8":"NumCompaniesWorked","9":"NA","10":"-0.03928268","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9999970","5":"0.1833973","6":"0.78597567","7":"1.0327555","8":"EducationField","9":"1","10":"-0.03172511","11":"EducationField = Human Resources","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9999970","5":"0.1833973","6":"0.78597567","7":"1.0327555","8":"StockOptionLevel","9":"2","10":"0.03173699","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9999970","5":"0.1833973","6":"0.78597567","7":"1.0327555","8":"PerformanceRating","9":"4","10":"0.03169965","11":"PerformanceRating = Outstanding","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9999970","5":"0.1833973","6":"0.78597567","7":"1.0327555","8":"MaritalStatus","9":"2","10":"0.02886035","11":"MaritalStatus = Married","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9819378","5":"0.2581777","6":"0.84052044","7":"0.8636884","8":"OverTime","9":"1","10":"0.13067048","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9819378","5":"0.2581777","6":"0.84052044","7":"0.8636884","8":"EnvironmentSatisfaction","9":"1","10":"-0.08787673","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9819378","5":"0.2581777","6":"0.84052044","7":"0.8636884","8":"BusinessTravel","9":"3","10":"-0.08728140","11":"BusinessTravel = Travel_Frequently","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9819378","5":"0.2581777","6":"0.84052044","7":"0.8636884","8":"TotalWorkingYears","9":"NA","10":"0.06332990","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9819378","5":"0.2581777","6":"0.84052044","7":"0.8636884","8":"Department","9":"2","10":"0.05073680","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9819378","5":"0.2581777","6":"0.84052044","7":"0.8636884","8":"StockOptionLevel","9":"1","10":"-0.04915856","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9819378","5":"0.2581777","6":"0.84052044","7":"0.8636884","8":"PerformanceRating","9":"4","10":"0.04418636","11":"PerformanceRating = Outstanding","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9819378","5":"0.2581777","6":"0.84052044","7":"0.8636884","8":"MaritalStatus","9":"1","10":"-0.04143891","11":"MaritalStatus = Single","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9995183","5":"0.2386616","6":"1.01065127","7":"0.7741440","8":"OverTime","9":"2","10":"-0.12573473","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9995183","5":"0.2386616","6":"1.01065127","7":"0.7741440","8":"BusinessTravel","9":"3","10":"-0.06488274","11":"BusinessTravel = Travel_Frequently","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9995183","5":"0.2386616","6":"1.01065127","7":"0.7741440","8":"TotalWorkingYears","9":"NA","10":"0.06017282","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9995183","5":"0.2386616","6":"1.01065127","7":"0.7741440","8":"JobSatisfaction","9":"4","10":"0.05934086","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9995183","5":"0.2386616","6":"1.01065127","7":"0.7741440","8":"Department","9":"3","10":"-0.05130977","11":"Department = Sales","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9995183","5":"0.2386616","6":"1.01065127","7":"0.7741440","8":"YearsSinceLastPromotion","9":"4","10":"-0.04069892","11":"2 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9995183","5":"0.2386616","6":"1.01065127","7":"0.7741440","8":"PerformanceRating","9":"3","10":"-0.04122328","11":"PerformanceRating = Excellent","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9995183","5":"0.2386616","6":"1.01065127","7":"0.7741440","8":"DistanceFromHome","9":"NA","10":"-0.03217152","11":"14 < DistanceFromHome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9123556","5":"0.2415019","6":"0.85023033","7":"0.7642631","8":"OverTime","9":"1","10":"0.13064669","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9123556","5":"0.2415019","6":"0.85023033","7":"0.7642631","8":"EnvironmentSatisfaction","9":"1","10":"-0.08956072","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9123556","5":"0.2415019","6":"0.85023033","7":"0.7642631","8":"BusinessTravel","9":"3","10":"-0.07060603","11":"BusinessTravel = Travel_Frequently","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9123556","5":"0.2415019","6":"0.85023033","7":"0.7642631","8":"JobInvolvement","9":"1","10":"-0.06520934","11":"JobInvolvement = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9123556","5":"0.2415019","6":"0.85023033","7":"0.7642631","8":"Department","9":"2","10":"0.04962595","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9123556","5":"0.2415019","6":"0.85023033","7":"0.7642631","8":"JobLevel","9":"1","10":"-0.04279231","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9123556","5":"0.2415019","6":"0.85023033","7":"0.7642631","8":"PerformanceRating","9":"4","10":"0.03798889","11":"PerformanceRating = Outstanding","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9123556","5":"0.2415019","6":"0.85023033","7":"0.7642631","8":"DistanceFromHome","9":"NA","10":"-0.03606039","11":"14 < DistanceFromHome","12":"<named list [31]>","13":"<named list [2]>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">plot_features</span>(explanation, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">plot_explanations</span>(explanation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-3.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># Challenge</span></span>
<span id="cb38-2"><a href="#cb38-2"></a></span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="co"># Custom plot function for a single case</span></span>
<span id="cb38-4"><a href="#cb38-4"></a>plot_features_custom <span class="ot">&lt;-</span> <span class="cf">function</span>(explanation_data, <span class="at">case_id =</span> <span class="dv">1</span>) {</span>
<span id="cb38-5"><a href="#cb38-5"></a>  case_data <span class="ot">&lt;-</span> explanation_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(case <span class="sc">==</span> case_id)</span>
<span id="cb38-6"><a href="#cb38-6"></a>  </span>
<span id="cb38-7"><a href="#cb38-7"></a>  case_data <span class="sc">%&gt;%</span></span>
<span id="cb38-8"><a href="#cb38-8"></a>    <span class="fu">mutate</span>(<span class="at">feature_desc =</span> <span class="fu">factor</span>(feature_desc, <span class="at">levels =</span> <span class="fu">rev</span>(feature_desc)),  <span class="co"># Ensure correct ordering</span></span>
<span id="cb38-9"><a href="#cb38-9"></a>           <span class="at">label =</span> <span class="fu">ifelse</span>(feature_weight <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"Supports"</span>, <span class="st">"Contradicts"</span>),</span>
<span id="cb38-10"><a href="#cb38-10"></a>           <span class="at">color =</span> <span class="fu">ifelse</span>(label <span class="sc">==</span> <span class="st">"Supports"</span>, <span class="st">"#4682b4"</span>, <span class="st">"#b22222"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb38-11"><a href="#cb38-11"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> feature_desc, <span class="at">y =</span> feature_weight, <span class="at">fill =</span> label)) <span class="sc">+</span></span>
<span id="cb38-12"><a href="#cb38-12"></a>    <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb38-13"><a href="#cb38-13"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb38-14"><a href="#cb38-14"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Feature"</span>, <span class="at">y =</span> <span class="st">"Weight"</span>) <span class="sc">+</span></span>
<span id="cb38-15"><a href="#cb38-15"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Supports"</span> <span class="ot">=</span> <span class="st">"#4682b4"</span>, <span class="st">"Contradicts"</span> <span class="ot">=</span> <span class="st">"#b22222"</span>)) <span class="sc">+</span></span>
<span id="cb38-16"><a href="#cb38-16"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb38-17"><a href="#cb38-17"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span>  <span class="co"># Rotate x-axis labels for better readability</span></span>
<span id="cb38-18"><a href="#cb38-18"></a>    <span class="co">#geom_text(aes(label = feature_weight), position = position_stack(vjust = 0.5), color = "white") +</span></span>
<span id="cb38-19"><a href="#cb38-19"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste0</span>(<span class="st">"Case: "</span>, case_id, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb38-20"><a href="#cb38-20"></a>                   <span class="st">"Label: "</span>, <span class="fu">unique</span>(case_data<span class="sc">$</span>label), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb38-21"><a href="#cb38-21"></a>                   <span class="st">"Probability: "</span>, <span class="fu">round</span>(<span class="fu">unique</span>(case_data<span class="sc">$</span>label_prob), <span class="dv">2</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb38-22"><a href="#cb38-22"></a>                   <span class="st">"Explanation Fit: "</span>, <span class="fu">round</span>(<span class="fu">unique</span>(case_data<span class="sc">$</span>model_r2), <span class="dv">2</span>))) <span class="sc">+</span></span>
<span id="cb38-23"><a href="#cb38-23"></a>    <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>))</span>
<span id="cb38-24"><a href="#cb38-24"></a>}</span>
<span id="cb38-25"><a href="#cb38-25"></a></span>
<span id="cb38-26"><a href="#cb38-26"></a><span class="co"># Example usage with your explanation data</span></span>
<span id="cb38-27"><a href="#cb38-27"></a><span class="fu">plot_features_custom</span>(explanation, <span class="at">case_id =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-4.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="co"># Define a custom plot function for plot_explanations()</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>plot_explanations_custom <span class="ot">&lt;-</span> <span class="cf">function</span>(explanation, ...) {</span>
<span id="cb39-3"><a href="#cb39-3"></a>  explanation<span class="sc">$</span>feature_desc <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb39-4"><a href="#cb39-4"></a>    explanation<span class="sc">$</span>feature_desc,</span>
<span id="cb39-5"><a href="#cb39-5"></a>    <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(</span>
<span id="cb39-6"><a href="#cb39-6"></a>      explanation<span class="sc">$</span>feature_desc[</span>
<span id="cb39-7"><a href="#cb39-7"></a>        <span class="fu">order</span>(explanation<span class="sc">$</span>feature, explanation<span class="sc">$</span>feature_value)</span>
<span id="cb39-8"><a href="#cb39-8"></a>        ]))</span>
<span id="cb39-9"><a href="#cb39-9"></a>  )</span>
<span id="cb39-10"><a href="#cb39-10"></a></span>
<span id="cb39-11"><a href="#cb39-11"></a>  num_cases <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(explanation<span class="sc">$</span>case)))</span>
<span id="cb39-12"><a href="#cb39-12"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">anyNA</span>(num_cases)) {</span>
<span id="cb39-13"><a href="#cb39-13"></a>    explanation<span class="sc">$</span>case <span class="ot">&lt;-</span> <span class="fu">factor</span>(explanation<span class="sc">$</span>case, <span class="at">levels =</span> <span class="fu">as.character</span>(<span class="fu">sort</span>(num_cases)))</span>
<span id="cb39-14"><a href="#cb39-14"></a>  }</span>
<span id="cb39-15"><a href="#cb39-15"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(explanation, <span class="fu">aes_</span>(<span class="sc">~</span>case, <span class="sc">~</span>feature_desc)) <span class="sc">+</span></span>
<span id="cb39-16"><a href="#cb39-16"></a>    <span class="fu">geom_tile</span>(<span class="fu">aes_</span>(<span class="at">fill =</span> <span class="sc">~</span>feature_weight)) <span class="sc">+</span></span>
<span id="cb39-17"><a href="#cb39-17"></a>    <span class="fu">scale_fill_gradient2</span>(<span class="st">'Feature</span><span class="sc">\n</span><span class="st">weight'</span>, <span class="at">low =</span> <span class="st">'#b22222'</span>, <span class="at">mid =</span> <span class="st">'white'</span>, <span class="at">high =</span> <span class="st">'#4682b4'</span>) <span class="sc">+</span></span>
<span id="cb39-18"><a href="#cb39-18"></a>    <span class="fu">scale_x_discrete</span>(<span class="st">'Case'</span>, <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb39-19"><a href="#cb39-19"></a>    <span class="fu">scale_y_discrete</span>(<span class="st">'Feature'</span>, <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb39-20"><a href="#cb39-20"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb39-21"><a href="#cb39-21"></a>    <span class="fu">theme</span>(<span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">colour =</span> <span class="st">'grey'</span>, <span class="at">size =</span> <span class="dv">1</span>),</span>
<span id="cb39-22"><a href="#cb39-22"></a>          <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb39-23"><a href="#cb39-23"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>))</span>
<span id="cb39-24"><a href="#cb39-24"></a>  p <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>label)</span>
<span id="cb39-25"><a href="#cb39-25"></a>}</span>
<span id="cb39-26"><a href="#cb39-26"></a></span>
<span id="cb39-27"><a href="#cb39-27"></a><span class="co"># Use this function with your explanation data</span></span>
<span id="cb39-28"><a href="#cb39-28"></a><span class="fu">plot_explanations_custom</span>(explanation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: `aes_()` was deprecated in ggplot2 3.0.0.
#&gt; ℹ Please use tidy evaluation idioms with `aes()`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: The `size` argument of `element_rect()` is deprecated as of ggplot2 3.4.0.
#&gt; ℹ Please use the `linewidth` argument instead.</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-5.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="07_explain_black_box_with_lime_files/figure-html/unnamed-chunk-1-5.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>



</main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"openEffect":"zoom","closeEffect":"zoom","loop":true,"descPosition":"bottom","selector":".lightbox"});</script>


</body></html>